from src.logic_formalizer import LogicFormalizer

formalizer = LogicFormalizer()

def test_negations_original():
    test_cases = [
        "Сократ — человек. Все люди смертны. Докажи, что Сократ смертен.",

        "Все честные люди говорят правду. Джон лжет. Докажи, что Джон не честный человек.",
        "Все млекопитающие теплокровные. Змея не теплокровная. Следовательно, змея не млекопитающее.",

        "Все рыбы живут в воде. Кит не рыба. Докажи, что кит не обязательно живет в воде.",
        "Все птицы летают. Пингвин не летает. Значит, пингвин не птица.",

        "Если число четное, то оно делится на 2. Число 7 не делится на 2. Докажи, что число 7 не четное."
    ]

    print("ТЕСТИРОВАНИЕ ЗАДАЧ С ОТРИЦАНИЯМИ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 2. Только один объект обладает свойством 
# ===================================================================
def test_only_one_possesses_property():
    test_cases = [
        "В классе 30 учеников. Каждый отличник сдал математику на 5. Только Маша сдала математику на 5. Докажи, что только Маша — отличница."
    ]

    print("ТЕСТ: ТОЛЬКО ОДИН ОБЪЕКТ ОБЛАДАЕТ СВОЙСТВОМ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 3. Существование + отрицание всеобщности
# ===================================================================
def test_exists_not_all():
    test_cases = [
        "Все драконы дышат огнём. Комодо не дышит огнём. Существует хотя бы одно существо, которое не является драконом."
    ]

    print("ТЕСТ: СУЩЕСТВОВАНИЕ СОБЫТИЯ + ОТРИЦАНИЕ ВСЕОБЩНОСТИ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 4. Двойное отрицание и несуществование
# ===================================================================
def test_double_negation():
    test_cases = [
        "Ни один единорог не существует в реальности. Докажи, что утверждение «существует единорог» ложно."
    ]

    print("ТЕСТ: ДВОЙНОЕ ОТРИЦАНИЕ И НЕСУЩЕСТВОВАНИЕ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 5. Контрапозиция
# ===================================================================
def test_contraposition():
    test_cases = [
        "Если студент подготовился, то он сдаст экзамен. Петя не сдал экзамен. Значит, Петя не готовился к экзамену."
    ]

    print("ТЕСТ: КОНТРАПОЗИЦИЯ (MODUS TOLLENS)")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 6. Чередование кванторов ∀∃ и ∃∀
# ===================================================================
def test_quantifier_alternation():
    test_cases = [
        "Каждый студент выбрал хотя бы одну книгу в библиотеке. Каждая книга была выбрана хотя бы одним студентом."
    ]

    print("ТЕСТ: ЧЕРЕДОВАНИЕ КВАНТОРОВ (∀∃ и ∃∀)")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 7. Транзитивность отношения
# ===================================================================
def test_transitivity():
    test_cases = [
        "Маша старше Кати, а Катя старше Лены. Докажи, что Маша старше Лены."
    ]

    print("ТЕСТ: ТРАНЗИТИВНОСТЬ ОТНОШЕНИЯ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")
#Если A старше B и B старше C, то A старше C.
# ===================================================================
# 8. «Никто, кроме...» 
# ===================================================================
def test_no_one_except():
    test_cases = [
        "Никто из рыцарей не лжёт. Все лжецы — не рыцари. Сэр Ланселот — рыцарь. Кроме сэра Ланселота никто не знает правду о Граале. Докажи, что сэр Ланселот не лжёт."
    ]

    print("ТЕСТ: «НИКТО, КРОМЕ...» + РЫЦАРИ/ЛЖЕЦЫ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 9. Необходимое условие
# ===================================================================
def test_necessary_condition():
    test_cases = [
        "Быть простым числом — необходимое условие для того, чтобы число было простым в аддитивной группе. Число 1 не является простым в аддитивной группе. Докажи, что 1 не простое число."
    ]

    print("ТЕСТ: НЕОБХОДИМОЕ УСЛОВИЕ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 10. Закон де Моргана и отрицание конъюнкции
# ===================================================================
def test_de_morgan():
    test_cases = [
        "Ни один волшебник не является одновременно магом и колдуном. Мерлин — волшебник. Докажи, что Мерлин не может быть и магом, и колдуном."
    ]

    print("ТЕСТ: ЗАКОН ДЕ МОРГАНА (¬(P ∧ Q))")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")

# ===================================================================
# 11. Цепочка импликаций 
# ===================================================================
def test_implication_chain():
    test_cases = [
        "Если идёт дождь, то улицы мокрые. Если улицы мокрые, то машины скользят. Если машины скользят, то происходят аварии. Сейчас идёт дождь. Что следует?"
    ]

    print("ТЕСТ: ЦЕПОЧКА ИМПЛИКАЦИЙ")
    print("=" * 60)
    for i, case in enumerate(test_cases, 1):
        print(f"\nТест {i}: {case}")
        result = formalizer.formalize_problem(case)
        print(f"Формулы: {result}\n")


if __name__ == "__main__":
    print("\n" + " ПОЛНЫЙ НАБОР ТЕСТОВ ДЛЯ LogicFormalizer ".center(80, "═") + "\n")

    test_negations_original()
    test_only_one_possesses_property()
    test_exists_not_all()
    test_double_negation()
    test_contraposition()
    test_quantifier_alternation()
    test_transitivity()
    test_no_one_except()
    test_necessary_condition()
    test_de_morgan()
    test_implication_chain()

    print("═" * 80)
    print("                  ВСЕ ТЕСТЫ ЗАВЕРШЕНЫ")
    print("═" * 80)



